<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P-006: 検索 - 在庫管理システム</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 0;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .header-title {
      font-size: 22px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .logout-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid white;
      color: white;
      padding: 10px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .logout-btn:hover {
      background: white;
      color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* Main Content */
    .main-content {
      background: white;
      margin: 0;
      min-height: calc(100vh - 64px);
      padding: 40px 30px;
    }

    .page-title {
      font-size: 28px;
      font-weight: 700;
      color: #333;
      margin-bottom: 30px;
      text-align: center;
    }

    /* Search Box Container */
    .search-container {
      max-width: 800px;
      margin: 0 auto 40px;
    }

    .search-box {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      margin-bottom: 20px;
    }

    .search-box:focus-within {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-icon {
      width: 24px;
      height: 24px;
      margin-right: 12px;
      color: #757575;
    }

    .search-input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 16px;
      color: #333;
    }

    .search-input::placeholder {
      color: #999;
    }

    /* Search Filter Buttons */
    .search-filters {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .filter-btn {
      padding: 10px 24px;
      background: white;
      border: 2px solid #e0e0e0;
      color: #666;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .filter-btn.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .filter-btn:hover {
      border-color: #667eea;
      transform: translateY(-2px);
    }

    /* Search Button */
    .search-btn-container {
      display: flex;
      justify-content: center;
    }

    .search-btn {
      padding: 16px 64px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 700;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .search-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
    }

    .search-btn:active {
      transform: translateY(-1px);
    }

    /* Results Section */
    .results-section {
      max-width: 800px;
      margin: 0 auto;
      display: none;
    }

    .results-section.visible {
      display: block;
    }

    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .results-count {
      font-size: 20px;
      font-weight: 700;
      color: #333;
    }

    .export-buttons {
      display: flex;
      gap: 8px;
    }

    .export-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .export-btn.pdf {
      background: #d32f2f;
      color: white;
    }

    .export-btn.csv {
      background: #0288d1;
      color: white;
    }

    .export-btn.excel {
      background: #388e3c;
      color: white;
    }

    .export-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* Result Cards */
    .result-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .result-card:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      transform: translateX(4px);
    }

    .result-image {
      width: 150px;
      height: 100px;
      border-radius: 8px;
      background: #f0f0f0;
      background-size: cover;
      background-position: center;
      flex-shrink: 0;
    }

    .result-content {
      flex: 1;
    }

    .result-meta {
      font-size: 14px;
      color: #757575;
      margin-bottom: 8px;
    }

    .result-title {
      font-size: 20px;
      font-weight: 600;
      color: #212121;
      margin-bottom: 12px;
    }

    .result-details {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .result-detail {
      font-size: 14px;
      color: #424242;
    }

    .result-detail.stock-zero {
      color: #d32f2f;
      font-weight: 600;
    }

    /* No Results */
    .no-results {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 60px 40px;
      text-align: center;
    }

    .no-results-text {
      font-size: 20px;
      color: #757575;
    }

    /* Back Button */
    .back-btn-container {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }

    .back-btn {
      padding: 16px 48px;
      background: white;
      border: 2px solid #667eea;
      color: #667eea;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .back-btn:hover {
      background: #667eea;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header {
        padding: 16px 20px;
        flex-direction: column;
        gap: 12px;
      }

      .header-title {
        font-size: 18px;
      }

      .main-content {
        padding: 24px 20px;
      }

      .page-title {
        font-size: 22px;
      }

      .search-filters {
        flex-direction: column;
      }

      .filter-btn {
        width: 100%;
      }

      .search-btn {
        width: 100%;
        padding: 16px 32px;
        font-size: 16px;
      }

      .results-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .export-buttons {
        width: 100%;
        flex-wrap: wrap;
      }

      .export-btn {
        flex: 1;
      }

      .result-card {
        flex-direction: column;
        align-items: flex-start;
      }

      .result-image {
        width: 100%;
        height: 200px;
      }

      .back-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="header-title">在庫管理システム - 検索</div>
    <button class="logout-btn" onclick="handleLogout()">ログアウト</button>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <h1 class="page-title">検索</h1>

    <!-- Search Box -->
    <div class="search-container">
      <div class="search-box">
        <svg class="search-icon" fill="currentColor" viewBox="0 0 24 24">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input
          type="text"
          class="search-input"
          id="searchInput"
          placeholder="収納ケース番号で検索... (例: A-001)"
          onkeypress="handleKeyPress(event)"
        >
      </div>

      <!-- Search Filter Buttons -->
      <div class="search-filters">
        <button class="filter-btn active" data-filter="storageCase" onclick="handleFilterChange('storageCase')">
          収納ケース番号
        </button>
        <button class="filter-btn" data-filter="partNumber" onclick="handleFilterChange('partNumber')">
          品番
        </button>
      </div>

      <!-- Search Button -->
      <div class="search-btn-container">
        <button class="search-btn" onclick="handleSearch()">検索</button>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection">
      <div class="results-header">
        <div class="results-count" id="resultsCount">検索結果: 0件</div>
        <div class="export-buttons">
          <button class="export-btn pdf" onclick="handleExportPDF()">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z"/>
            </svg>
            PDF
          </button>
          <button class="export-btn csv" onclick="handleExportCSV()">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
            </svg>
            CSV
          </button>
          <button class="export-btn excel" onclick="handleExportExcel()">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
            </svg>
            Excel
          </button>
        </div>
      </div>

      <!-- Results List -->
      <div id="resultsList"></div>
    </div>

    <!-- Back Button -->
    <div class="back-btn-container">
      <button class="back-btn" onclick="handleBack()">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        カテゴリー選択へ戻る
      </button>
    </div>
  </div>

  <script>
    // ダミーデータ
    const dummyData = [
      {
        id: 1,
        category: { name: 'GT3-053' },
        genre: { name: 'トランスミッション' },
        part: {
          id: 1,
          partNumber: '12345-ABC-001',
          partName: 'DOG RING',
          unitNumber: 'GEAR_001',
          storageCase: 'A-001',
          stockQuantity: 0,
          imageUrl: null,
        },
      },
      {
        id: 2,
        category: { name: 'GT3-053' },
        genre: { name: 'トランスミッション' },
        part: {
          id: 2,
          partNumber: '12345-ABC-002',
          partName: '523A LAYSHAFT SET',
          unitNumber: 'GEAR_002',
          storageCase: 'A-001',
          stockQuantity: 5,
          imageUrl: null,
        },
      },
      {
        id: 3,
        category: { name: 'GT3-053' },
        genre: { name: 'エンジン' },
        part: {
          id: 3,
          partNumber: '12345-ABC-003',
          partName: 'PISTON RING SET',
          unitNumber: 'ENGINE_001',
          storageCase: 'B-002',
          stockQuantity: 12,
          imageUrl: null,
        },
      },
      {
        id: 4,
        category: { name: 'GT3-053' },
        genre: { name: 'ブレーキ' },
        part: {
          id: 4,
          partNumber: '12345-ABC-004',
          partName: 'BRAKE PAD FRONT',
          unitNumber: 'BRAKE_001',
          storageCase: 'C-003',
          stockQuantity: 8,
          imageUrl: null,
        },
      },
    ];

    let currentFilter = 'storageCase';

    function handleFilterChange(filter) {
      currentFilter = filter;

      // ボタンのアクティブ状態を更新
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`[data-filter="${filter}"]`).classList.add('active');

      // プレースホルダーを更新
      const input = document.getElementById('searchInput');
      if (filter === 'storageCase') {
        input.placeholder = '収納ケース番号で検索... (例: A-001)';
      } else if (filter === 'partNumber') {
        input.placeholder = '品番で検索... (例: 12345-ABC-001)';
      }
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        handleSearch();
      }
    }

    function handleSearch() {
      const query = document.getElementById('searchInput').value.trim();

      if (!query) {
        alert('検索キーワードを入力してください');
        return;
      }

      // 検索実行（デモ: ダミーデータをフィルタリング）
      let results = [];

      if (currentFilter === 'storageCase') {
        results = dummyData.filter(item =>
          item.part.storageCase.toLowerCase().includes(query.toLowerCase())
        );
      } else if (currentFilter === 'partNumber') {
        results = dummyData.filter(item =>
          item.part.partNumber.toLowerCase().includes(query.toLowerCase())
        );
      }

      // 結果を表示
      displayResults(results);
    }

    function displayResults(results) {
      const resultsSection = document.getElementById('resultsSection');
      const resultsCount = document.getElementById('resultsCount');
      const resultsList = document.getElementById('resultsList');

      resultsSection.classList.add('visible');
      resultsCount.textContent = `検索結果: ${results.length}件`;

      if (results.length === 0) {
        resultsList.innerHTML = `
          <div class="no-results">
            <div class="no-results-text">検索結果が見つかりませんでした</div>
          </div>
        `;
        return;
      }

      // 結果カードを生成
      resultsList.innerHTML = results.map(result => `
        <div class="result-card" onclick="handleResultClick(${result.id})">
          ${result.part.imageUrl ? `
            <div class="result-image" style="background-image: url(${result.part.imageUrl})"></div>
          ` : `
            <div class="result-image"></div>
          `}
          <div class="result-content">
            <div class="result-meta">
              ${result.category.name} / ${result.genre.name}
              ${result.part.partNumber ? ` / 品番: ${result.part.partNumber}` : ''}
              ${result.part.storageCase ? ` / ケース: ${result.part.storageCase}` : ''}
            </div>
            <div class="result-title">${result.part.partName}</div>
            <div class="result-details">
              ${result.part.unitNumber ? `
                <div class="result-detail">ユニット番号: ${result.part.unitNumber}</div>
              ` : ''}
              <div class="result-detail ${result.part.stockQuantity === 0 ? 'stock-zero' : ''}">
                在庫: ${result.part.stockQuantity}
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    function handleResultClick(id) {
      alert(`パーツID ${id} の詳細ページへ遷移（デモ）`);
    }

    function handleExportPDF() {
      alert('PDF出力機能（デモ）\n\n検索結果をPDF形式でエクスポートします。');
    }

    function handleExportCSV() {
      alert('CSV出力機能（デモ）\n\n検索結果をCSV形式でエクスポートします。');
    }

    function handleExportExcel() {
      alert('Excel出力機能（デモ）\n\n検索結果をExcel形式でエクスポートします。');
    }

    function handleBack() {
      alert('カテゴリー選択ページへ戻ります（デモ）');
    }

    function handleLogout() {
      if (confirm('ログアウトしますか？')) {
        alert('ログアウトしました（デモ）\n\nログインページへ戻ります。');
      }
    }
  </script>
</body>
</html>
